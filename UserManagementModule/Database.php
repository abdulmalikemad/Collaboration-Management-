<?php
class Database {
  // خصائص الاتصال بقاعدة البيانات
  private $host = "localhost";  // اسم الخادم الذي تستضيف عليه قاعدة البيانات (عادة ما يكون "localhost" في البيئات المحلية)
  private $dbname = "cmt";      // اسم قاعدة البيانات التي تريد الاتصال بها
  private $user = "root";       // اسم المستخدم لقاعدة البيانات (الافتراضي هو "root" في البيئات المحلية)
  private $pass = "";           // كلمة المرور لقاعدة البيانات (الافتراضي في البيئات المحلية هو فارغ)

  // دالة الاتصال بقاعدة البيانات
  public function connect() {
    try {
      // محاولة إنشاء الاتصال بقاعدة البيانات باستخدام mysqli
      $conn = new mysqli($this->host, $this->user, $this->pass, $this->dbname);
      
      // التحقق من وجود خطأ في الاتصال
      if ($conn->connect_error) {
        // إذا فشل الاتصال، يتم رمي استثناء مع رسالة الخطأ
        throw new Exception("فشل الاتصال بقاعدة البيانات: " . $conn->connect_error);
      }

      // إذا تم الاتصال بنجاح، يتم إرجاع الاتصال
      return $conn;
    } catch (Exception $e) {
      // إذا حدث استثناء أثناء الاتصال بقاعدة البيانات، سيتم تسجيل الخطأ في ملف السجلات
      error_log("Database Connection Error: " . $e->getMessage()); // سجل الخطأ في ملف logs

      // في حالة حدوث خطأ، يتم إيقاف البرنامج وعرض رسالة للمستخدم تشير إلى حدوث مشكلة في الاتصال
      die("⚠️ حدث خطأ أثناء الاتصال بقاعدة البيانات. الرجاء المحاولة لاحقًا.");
    }
  }
}
?>
